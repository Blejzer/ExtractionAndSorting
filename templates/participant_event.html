{% extends "base.html" %}

{% block title %}Participant Details{% endblock %}

{% block content %}
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-info" role="alert">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <h1 class="mb-4">Participant Details</h1>
  <!-- your existing search, table, pagination -->


    <h2 class="mb-3">{{ participant.name }}
        <a class="btn btn-primary"
   href="{{ url_for('participants.edit_participant',
                    pid=participant['pid'],
                    page=page, search=search, sort=sort) }}">
  ✏️ Edit Participant
</a>
</h2>
    <p><strong>PID:</strong> {{ participant['pid'] }}</p>
    <p><strong>Position:</strong> {{ participant.position }}</p>
    <p><strong>Grade:</strong> {{ participant.grade }}</p>
    <p><strong>Country:</strong> {{ participant.country }}</p>

    <h4 class="mt-4">Events Attended</h4>
    <table class="table table-striped mt-2">
        <thead>
            <tr>
                <th>Event ID</th>
                <th>Title</th>
                <th>Location</th>
                <th>Date From</th>
                <th>Date To</th>
            </tr>
        </thead>
        <tbody>
        {% for event in events %}
            <tr>
                <td>{{ event.eid }}</td>
                <td><a href="{{ url_for('events.event_detail', eid=event.eid) }}">{{ event.title }}</a></td>
                <td>{{ event.location }}</td>
                <td>{{ event.dateFrom.strftime('%Y-%m-%d') if event.dateFrom else '' }}</td>
                <td>{{ event.dateTo.strftime('%Y-%m-%d') if event.dateTo else '' }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a class="btn btn-secondary" href="{{ back_url }}">
  ← Back
</a>

{% endblock %}
